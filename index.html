<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Croft Common</title>
    <meta name="description" content="Hospitality For Good - Croft Common Bristol">
    <meta name="author" content="Croft Common" />
    <link rel="canonical" href="https://www.croftcommontest.com/" />
    
    <!-- Favicon and App Icons -->
    <link rel="icon" href="/brand/logo.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="/brand/logo.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/brand/logo.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/brand/logo.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/brand/logo.png">
    <meta name="msapplication-TileImage" content="/brand/logo.png">
    
    <!-- iOS Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Croft Common">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Preload critical images for intro transition -->
    <link rel="preload" as="image" href="/brand/logo.png" fetchpriority="high">
    <link rel="preload" as="image" href="/lovable-uploads/d1fb9178-8f7e-47fb-a8ac-71350264d76f.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">

    <meta property="og:title" content="Croft Common - Pure Hospitality" />
    <meta property="og:description" content="Pure Hospitality - Croft Common Bristol" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/brand/logo.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Croft Common - Pure Hospitality" />
    <meta name="twitter:description" content="Pure Hospitality - Croft Common Bristol" />
    <meta name="twitter:image" content="/brand/logo.png" />
    <!-- Bootstrap canonicalisation and token routing BEFORE React loads -->
    <script>
      (function () {
        try {
          var w = window;
          var loc = w.location;
          var hasCap = !!w.Capacitor;
          var isNative = false;
          try { isNative = hasCap && typeof w.Capacitor.isNativePlatform === 'function' && w.Capacitor.isNativePlatform(); } catch (e) { isNative = false; }
          var host = loc.hostname;
          var search = loc.search || '';
          var hash = loc.hash || '';
           var hasRecoveryTokens = /access_token=|refresh_token=|code=|type=recovery|token_hash=/.test(search + hash);
 
           if (!isNative) {
             var onApex = host === 'croftcommontest.com';
             var onWww = host === 'www.croftcommontest.com';
             var onLogin = /^\/management\/login\/?$/.test(loc.pathname);
 
             if (hasRecoveryTokens) {
              // Single-hop: always send tokens directly to /management/login on www
              if (onApex || (onWww && !onLogin)) {
                var target = 'https://www.croftcommontest.com/management/login' + search + hash;
                console.info('[bootstrap] Directing tokens to /management/login on www');
                w.location.replace(target);
                return;
              }
            } else {
              // No tokens: canonicalise apex -> www preserving path
              if (onApex) {
                var newUrl = 'https://www.croftcommontest.com' + loc.pathname + search + hash;
                console.info('[bootstrap] Canonicalising to www');
                w.location.replace(newUrl);
                return;
              }
            }
          }
        } catch (e) { /* swallow to avoid blocking app */ }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
